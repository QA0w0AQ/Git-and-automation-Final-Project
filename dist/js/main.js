"use strict";var Enemy=function(e,n,t){this.x=e,this.y=n,this.speed=t,this.sprite="images/enemy-bug.png"};Enemy.prototype.update=function(){this.x+=this.speed,505<this.x&&(this.x=-100),this.x+60>player.x&&this.x<player.x+50&&player.y<this.y+30&&player.y+50>this.y&&(player.x=200,player.y=300);var e=document.querySelector("h2").innerHTML;if("game level 2"===e&&(this.speed=2),"game level 3"===e&&(this.speed=3),"game level 4"===e&&(this.speed=4),"game level 5"===e&&(this.speed=5),"game level 6"===e&&(this.speed=6),"game level 7"===e&&(this.speed=7),"game level 8"===e)return this.speed=8,alert("YEAH! YOU WIN~!"),location.reload()},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(){this.spritePlayer="images/char-horn-girl.png",this.x=200,this.y=300};Player.prototype.update=function(){if(400<this.x&&(this.x=400),this.x<0&&(this.x=0),420<this.y&&(this.y=420),this.y<0)return levelFunction()},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.spritePlayer),this.x,this.y)},Player.prototype.handleInput=function(e){"left"==e&&(this.x-=100),"up"==e&&(this.y-=80),"right"==e&&(this.x+=100),"down"==e&&(this.y+=80)};var enemy1=new Enemy(0,60,1),enemy2=new Enemy(-50,140,1.5),enemy3=new Enemy(-200,220,1),enemy4=new Enemy(-250,60,1.5),enemy5=new Enemy(-400,140,1),allEnemies=[enemy1,enemy2,enemy3,enemy4,enemy5],player=new Player;document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var counter=1;function add(){return counter+=1}var levelFunction=function(){document.querySelector("h2").innerHTML="game level "+add(),player.y=300},Engine=function(e){var t,n=e.document,i=e.window,r=n.createElement("canvas"),a=r.getContext("2d");function s(){var n,e=Date.now();n=(e-t)/1e3,allEnemies.forEach(function(e){e.update(n)}),player.update(),function(){var e,n,t=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(a.clearRect(0,0,r.width,r.height),e=0;e<6;e++)for(n=0;n<5;n++)a.drawImage(Resources.get(t[e]),101*n,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),t=e,i.requestAnimationFrame(s)}r.width=505,r.height=606,n.body.appendChild(r),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png","images/char-pink-girl.png","images/char-horn-girl.png","images/char-cat-girl.png","images/char-princess-girl.png"]),Resources.onReady(function(){t=Date.now(),s()}),e.ctx=a}(void 0);!function(){var t={},i=[];function n(e){if(t[e])return t[e];var n=new Image;n.onload=function(){t[e]=n,r()&&i.forEach(function(e){e()})},t[e]=!1,n.src=e}function r(){var e=!0;for(var n in t)t.hasOwnProperty(n)&&!t[n]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(e){return t[e]},onReady:function(e){i.push(e)},isReady:r}}();